<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="ColladaExporterSL.py">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ColladaExporterSL.py | MeshLogic</title>
<link href="../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://meshlogic.github.io/listings/blender-addons/collada-exporter-sl/0.3/ColladaExporterSL.py.html">
<!--[if lt IE 9]><script src="../../../../assets/js/html5.js"></script><![endif]--><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
</head>
<body>


<!-- BODY CONTAINER !! -->
<div id="body_container" class="container">

    <!-- HEADER -->
    <header id="body_header" class="bodypart hidden-print"><a href="../../../../" title="Home"><i>A personal blog on computer graphics, scientific computing, Blender, Jupyter and Second Life</i></a>

        
    </header><!-- NAVBAR --><nav class="navbar navbar-default navbar-static-top hidden-print bodypart"><div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

                <a class="navbar-brand visible-xs" href="../../../../">
                    <span id="blog-title">MeshLogic</span>
                </a>
        </div>

        <div id="bs-navbar" class="collapse navbar-collapse" aria-expanded="false" role="navigation">
            <ul class="nav navbar-nav">
<li>
<a href="../../../../"><span id="homelink">Home</span></a>
                </li>
<li>
<a href="../../../../archive.html">Archive</a>
                </li>
<li>
<a href="../../../../gallery/">Gallery</a>
                </li>
<li>
<a href="../../../../pages/blender-addons/">Blender Addons</a>
                </li>
<li>
<a href="../../../../pages/articles/">Jupyter Articles</a>
                </li>
<li>
<a href="../../../../pages/about/">About</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="ColladaExporterSL.py" id="sourcelink">Source</a>
    </li>
                
            </ul>
</div>
    </nav><!-- PAGE CONTAINER --><div id="page_container" class="clearfix">

        <div id="page_main" class="bodypart" role="main">
<nav class="breadcrumbs"><ul class="breadcrumb">
<li><a href="../../../">listings</a></li>
                <li><a href="../../">blender-addons</a></li>
                <li><a href="../">collada-exporter-sl</a></li>
                <li><a href=".">0.3</a></li>
                <li>ColladaExporterSL.py</li>
</ul></nav><h1>ColladaExporterSL.py
        <small><a href="ColladaExporterSL.py">(Source)</a></small>
    </h1>
    <table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-1">  1</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-2">  2</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-3">  3</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-4">  4</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-5">  5</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-6">  6</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-7">  7</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-8">  8</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-9">  9</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-10"> 10</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-11"> 11</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-12"> 12</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-13"> 13</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-14"> 14</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-15"> 15</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-16"> 16</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-17"> 17</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-18"> 18</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-19"> 19</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-20"> 20</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-21"> 21</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-22"> 22</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-23"> 23</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-24"> 24</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-25"> 25</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-26"> 26</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-27"> 27</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-28"> 28</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-29"> 29</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-30"> 30</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-31"> 31</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-32"> 32</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-33"> 33</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-34"> 34</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-35"> 35</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-36"> 36</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-37"> 37</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-38"> 38</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-39"> 39</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-40"> 40</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-41"> 41</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-42"> 42</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-43"> 43</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-44"> 44</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-45"> 45</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-46"> 46</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-47"> 47</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-48"> 48</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-49"> 49</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-50"> 50</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-51"> 51</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-52"> 52</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-53"> 53</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-54"> 54</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-55"> 55</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-56"> 56</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-57"> 57</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-58"> 58</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-59"> 59</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-60"> 60</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-61"> 61</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-62"> 62</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-63"> 63</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-64"> 64</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-65"> 65</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-66"> 66</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-67"> 67</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-68"> 68</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-69"> 69</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-70"> 70</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-71"> 71</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-72"> 72</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-73"> 73</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-74"> 74</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-75"> 75</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-76"> 76</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-77"> 77</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-78"> 78</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-79"> 79</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-80"> 80</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-81"> 81</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-82"> 82</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-83"> 83</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-84"> 84</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-85"> 85</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-86"> 86</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-87"> 87</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-88"> 88</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-89"> 89</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-90"> 90</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-91"> 91</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-92"> 92</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-93"> 93</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-94"> 94</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-95"> 95</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-96"> 96</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-97"> 97</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-98"> 98</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-99"> 99</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-100">100</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-101">101</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-102">102</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-103">103</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-104">104</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-105">105</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-106">106</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-107">107</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-108">108</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-109">109</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-110">110</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-111">111</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-112">112</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-113">113</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-114">114</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-115">115</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-116">116</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-117">117</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-118">118</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-119">119</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-120">120</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-121">121</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-122">122</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-123">123</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-124">124</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-125">125</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-126">126</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-127">127</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-128">128</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-129">129</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-130">130</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-131">131</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-132">132</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-133">133</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-134">134</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-135">135</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-136">136</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-137">137</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-138">138</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-139">139</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-140">140</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-141">141</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-142">142</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-143">143</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-144">144</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-145">145</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-146">146</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-147">147</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-148">148</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-149">149</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-150">150</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-151">151</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-152">152</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-153">153</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-154">154</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-155">155</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-156">156</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-157">157</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-158">158</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-159">159</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-160">160</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-161">161</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-162">162</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-163">163</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-164">164</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-165">165</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-166">166</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-167">167</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-168">168</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-169">169</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-170">170</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-171">171</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-172">172</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-173">173</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-174">174</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-175">175</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-176">176</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-177">177</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-178">178</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-179">179</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-180">180</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-181">181</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-182">182</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-183">183</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-184">184</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-185">185</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-186">186</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-187">187</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-188">188</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-189">189</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-190">190</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-191">191</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-192">192</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-193">193</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-194">194</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-195">195</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-196">196</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-197">197</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-198">198</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-199">199</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-200">200</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-201">201</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-202">202</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-203">203</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-204">204</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-205">205</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-206">206</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-207">207</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-208">208</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-209">209</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-210">210</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-211">211</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-212">212</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-213">213</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-214">214</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-215">215</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-216">216</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-217">217</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-218">218</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-219">219</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-220">220</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-221">221</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-222">222</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-223">223</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-224">224</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-225">225</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-226">226</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-227">227</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-228">228</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-229">229</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-230">230</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-231">231</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-232">232</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-233">233</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-234">234</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-235">235</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-236">236</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-237">237</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-238">238</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-239">239</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-240">240</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-241">241</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-242">242</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-243">243</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-244">244</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-245">245</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-246">246</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-247">247</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-248">248</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-249">249</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-250">250</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-251">251</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-252">252</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-253">253</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-254">254</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-255">255</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-256">256</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-257">257</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-258">258</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-259">259</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-260">260</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-261">261</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-262">262</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-263">263</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-264">264</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-265">265</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-266">266</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-267">267</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-268">268</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-269">269</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-270">270</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-271">271</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-272">272</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-273">273</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-274">274</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-275">275</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-276">276</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-277">277</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-278">278</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-279">279</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-280">280</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-281">281</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-282">282</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-283">283</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-284">284</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-285">285</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-286">286</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-287">287</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-288">288</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-289">289</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-290">290</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-291">291</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-292">292</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-293">293</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-294">294</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-295">295</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-296">296</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-297">297</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-298">298</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-299">299</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-300">300</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-301">301</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-302">302</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-303">303</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-304">304</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-305">305</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-306">306</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-307">307</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-308">308</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-309">309</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-310">310</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-311">311</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-312">312</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-313">313</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-314">314</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-315">315</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-316">316</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-317">317</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-318">318</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-319">319</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-320">320</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-321">321</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-322">322</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-323">323</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-324">324</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-325">325</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-326">326</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-327">327</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-328">328</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-329">329</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-330">330</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-331">331</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-332">332</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-333">333</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-334">334</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-335">335</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-336">336</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-337">337</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-338">338</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-339">339</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-340">340</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-341">341</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-342">342</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-343">343</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-344">344</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-345">345</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-346">346</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-347">347</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-348">348</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-349">349</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-350">350</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-351">351</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-352">352</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-353">353</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-354">354</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-355">355</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-356">356</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-357">357</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-358">358</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-359">359</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-360">360</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-361">361</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-362">362</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-363">363</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-364">364</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-365">365</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-366">366</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-367">367</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-368">368</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-369">369</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-370">370</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-371">371</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-372">372</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-373">373</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-374">374</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-375">375</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-376">376</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-377">377</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-378">378</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-379">379</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-380">380</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-381">381</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-382">382</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-383">383</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-384">384</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-385">385</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-386">386</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-387">387</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-388">388</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-389">389</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-390">390</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-391">391</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-392">392</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-393">393</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-394">394</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-395">395</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-396">396</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-397">397</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-398">398</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-399">399</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-400">400</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-401">401</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-402">402</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-403">403</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-404">404</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-405">405</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-406">406</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-407">407</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-408">408</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-409">409</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-410">410</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-411">411</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-412">412</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-413">413</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-414">414</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-415">415</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-416">416</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-417">417</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-418">418</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-419">419</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-420">420</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-421">421</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-422">422</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-423">423</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-424">424</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-425">425</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-426">426</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-427">427</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-428">428</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-429">429</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-430">430</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-431">431</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-432">432</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-433">433</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-434">434</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-435">435</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-436">436</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-437">437</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-438">438</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-439">439</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-440">440</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-441">441</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-442">442</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-443">443</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-444">444</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-445">445</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-446">446</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-447">447</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-448">448</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-449">449</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-450">450</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-451">451</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-452">452</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-453">453</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-454">454</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-455">455</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-456">456</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-457">457</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-458">458</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-459">459</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-460">460</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-461">461</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-462">462</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-463">463</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-464">464</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-465">465</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-466">466</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-467">467</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-468">468</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-469">469</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-470">470</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-471">471</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-472">472</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-473">473</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-474">474</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-475">475</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-476">476</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-477">477</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-478">478</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-479">479</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-480">480</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-481">481</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-482">482</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-483">483</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-484">484</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-485">485</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-486">486</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-487">487</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-488">488</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-489">489</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-490">490</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-491">491</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-492">492</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-493">493</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-494">494</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-495">495</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-496">496</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-497">497</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-498">498</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-499">499</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-500">500</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-501">501</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-502">502</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-503">503</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-504">504</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-505">505</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-506">506</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-507">507</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-508">508</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-509">509</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-510">510</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-511">511</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-512">512</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-513">513</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-514">514</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-515">515</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-516">516</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-517">517</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-518">518</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-519">519</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-520">520</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-521">521</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-522">522</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-523">523</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-524">524</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-525">525</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-526">526</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-527">527</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-528">528</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-529">529</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-530">530</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-531">531</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-532">532</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-533">533</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-534">534</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-535">535</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-536">536</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-537">537</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-538">538</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-539">539</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-540">540</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-541">541</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-542">542</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-543">543</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-544">544</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-545">545</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-546">546</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-547">547</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-548">548</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-549">549</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-550">550</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-551">551</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-552">552</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-553">553</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-554">554</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-555">555</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-556">556</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-557">557</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-558">558</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-559">559</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-560">560</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-561">561</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-562">562</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-563">563</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-564">564</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-565">565</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-566">566</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-567">567</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-568">568</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-569">569</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-570">570</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-571">571</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-572">572</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-573">573</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-574">574</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-575">575</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-576">576</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-577">577</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-578">578</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-579">579</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-580">580</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-581">581</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-582">582</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-583">583</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-584">584</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-585">585</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-586">586</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-587">587</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-588">588</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-589">589</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-590">590</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-591">591</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-592">592</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-593">593</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-594">594</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-595">595</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-596">596</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-597">597</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-598">598</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-599">599</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-600">600</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-601">601</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-602">602</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-603">603</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-604">604</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-605">605</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-606">606</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-607">607</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-608">608</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-609">609</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-610">610</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-611">611</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-612">612</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-613">613</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-614">614</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-615">615</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-616">616</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-617">617</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-618">618</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-619">619</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-620">620</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-621">621</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-622">622</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-623">623</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-624">624</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-625">625</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-626">626</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-627">627</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-628">628</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-629">629</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-630">630</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-631">631</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-632">632</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-633">633</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-634">634</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-635">635</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-636">636</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-637">637</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-638">638</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-639">639</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-640">640</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-641">641</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-642">642</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-643">643</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-644">644</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-645">645</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-646">646</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-647">647</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-648">648</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-649">649</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-650">650</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-651">651</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-652">652</a>
<a href="#listingsblender-addonscollada-exporter-sl03colladaexporterslpy-653">653</a></pre></div></td>
<td class="code"><pre class="code literal-block"><a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-1"></a><span class="c1">#-------------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-2"></a><span class="c1">#                Collada Exporter for Second Life - Blender Addon</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-3"></a><span class="c1">#</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-4"></a><span class="c1"># - Export static mesh objects to Collada (.dae), including textures assigned to </span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-5"></a><span class="c1">#   the active UV layer. Tested with Firestorm Viewer for Second Life.</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-6"></a><span class="c1">#</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-7"></a><span class="c1"># - Requires python collada module https://github.com/pycollada/pycollada</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-8"></a><span class="c1"># - Pycollada is not part of official Blender, so must be installed into</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-9"></a><span class="c1">#   Blender's folder (eg. Blender/2.78/scripts/modules)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-10"></a><span class="c1">#</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-11"></a><span class="c1">#   Version: 0.3</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-12"></a><span class="c1">#   Revised: 30.11.2017</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-13"></a><span class="c1">#   Author: Miki (meshlogic)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-14"></a><span class="c1">#-------------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-15"></a><span class="c1"># v0.3</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-16"></a><span class="c1">#   - Remove model tags (PHY, LOD1, LOD2, etc) from material id names</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-17"></a><span class="c1">#   - Export normals according the Auto-Smooth mesh option</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-18"></a><span class="c1">#   - Added more shading options</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-19"></a><span class="c1"># v0.2</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-20"></a><span class="c1">#   - Objects (geometry nodes) are sorted by name now</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-21"></a><span class="c1">#-------------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-22"></a><span class="n">bl_info</span> <span class="o">=</span> <span class="p">{</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-23"></a>    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Collada Exporter SL"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-24"></a>    <span class="s2">"author"</span><span class="p">:</span> <span class="s2">"Miki (meshlogic)"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-25"></a>    <span class="s2">"category"</span><span class="p">:</span> <span class="s2">"Import-Export"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-26"></a>    <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Export static mesh objects to Collada (.dae), incl. textures assigned to the active UV layer."</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-27"></a>    <span class="s2">"location"</span><span class="p">:</span> <span class="s2">"File &gt; Export"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-28"></a>    <span class="s2">"version"</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-29"></a>    <span class="s2">"blender"</span><span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">79</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-30"></a><span class="p">}</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-31"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-32"></a><span class="kn">import</span> <span class="nn">bpy</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-33"></a><span class="kn">import</span> <span class="nn">bpy_extras.io_utils</span> <span class="kn">as</span> <span class="nn">io_utils</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-34"></a><span class="kn">import</span> <span class="nn">bmesh</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-35"></a><span class="kn">import</span> <span class="nn">os</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-36"></a><span class="kn">import</span> <span class="nn">re</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-37"></a><span class="kn">import</span> <span class="nn">time</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-38"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-39"></a><span class="kn">import</span> <span class="nn">xml.etree.ElementTree</span> <span class="kn">as</span> <span class="nn">ET</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-40"></a><span class="kn">from</span> <span class="nn">bpy.props</span> <span class="kn">import</span> <span class="o">*</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-41"></a><span class="kn">from</span> <span class="nn">bpy.types</span> <span class="kn">import</span> <span class="n">Menu</span><span class="p">,</span> <span class="n">Operator</span><span class="p">,</span> <span class="n">Panel</span><span class="p">,</span> <span class="n">UIList</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-42"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-43"></a><span class="c1"># Import pycollada module</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-44"></a><span class="kn">from</span> <span class="nn">collada</span> <span class="kn">import</span> <span class="o">*</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-45"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-46"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-47"></a><span class="c1">#-------------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-48"></a><span class="c1"># ColladaExporter OPERATOR</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-49"></a><span class="c1">#-------------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-50"></a><span class="k">class</span> <span class="nc">ColladaExporter_OT</span><span class="p">(</span><span class="n">Operator</span><span class="p">,</span> <span class="n">io_utils</span><span class="o">.</span><span class="n">ExportHelper</span><span class="p">):</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-51"></a>    <span class="n">bl_idname</span> <span class="o">=</span> <span class="s2">"export_mesh.collada_sl"</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-52"></a>    <span class="n">bl_label</span> <span class="o">=</span> <span class="s2">"Export Collada for SL"</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-53"></a>    <span class="n">bl_description</span> <span class="o">=</span> <span class="s2">"Export the selected static mesh objects to Collada"</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-54"></a>    <span class="n">bl_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'PRESET'</span><span class="p">}</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-55"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-56"></a>    <span class="c1">#--- Collada file extension</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-57"></a>    <span class="n">filename_ext</span> <span class="o">=</span> <span class="s2">".dae"</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-58"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-59"></a>    <span class="c1">#--- Mesh props</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-60"></a>    <span class="n">apply_modifiers</span> <span class="o">=</span> <span class="n">BoolProperty</span><span class="p">(</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-61"></a>            <span class="n">name</span> <span class="o">=</span> <span class="s2">"Apply Modifiers (View)"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-62"></a>            <span class="n">description</span> <span class="o">=</span> <span class="s2">"Apply modifiers (view mode)"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-63"></a>            <span class="n">default</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-64"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-65"></a>    <span class="n">triangulate</span> <span class="o">=</span> <span class="n">BoolProperty</span><span class="p">(</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-66"></a>            <span class="n">name</span> <span class="o">=</span> <span class="s2">"Triangulate"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-67"></a>            <span class="n">description</span> <span class="o">=</span> <span class="s2">"Triangulate the mesh faces for export"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-68"></a>            <span class="n">default</span> <span class="o">=</span> <span class="bp">False</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-69"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-70"></a>    <span class="n">round_values</span> <span class="o">=</span> <span class="n">BoolProperty</span><span class="p">(</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-71"></a>            <span class="n">name</span> <span class="o">=</span> <span class="s2">"Round"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-72"></a>            <span class="n">description</span> <span class="o">=</span> <span class="s2">"Round values (vertex and normal coords) to the given decimal places"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-73"></a>            <span class="n">default</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-74"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-75"></a>    <span class="n">round_decimals</span> <span class="o">=</span> <span class="n">IntProperty</span><span class="p">(</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-76"></a>            <span class="n">name</span> <span class="o">=</span> <span class="s2">"Decimals"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-77"></a>            <span class="n">description</span> <span class="o">=</span> <span class="s2">"Round values (vertex and normal coords) to the given decimal places"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-78"></a>            <span class="nb">min</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="nb">max</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-79"></a>            <span class="n">default</span> <span class="o">=</span> <span class="mi">6</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-80"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-81"></a>    <span class="c1">#--- Material props</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-82"></a>    <span class="n">diffuse_material</span> <span class="o">=</span> <span class="n">EnumProperty</span><span class="p">(</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-83"></a>        <span class="n">name</span> <span class="o">=</span> <span class="s2">"Diffuse Material"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-84"></a>        <span class="n">description</span> <span class="o">=</span> <span class="s2">"Diffuse material options"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-85"></a>        <span class="n">items</span> <span class="o">=</span> <span class="p">[</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-86"></a>            <span class="p">(</span><span class="s1">'UV_IMAGE'</span><span class="p">,</span> <span class="s2">"UV Textures"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-87"></a>            <span class="p">(</span><span class="s1">'MAT_COLOR'</span><span class="p">,</span> <span class="s2">"Material Colors"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-88"></a>            <span class="p">(</span><span class="s1">'CUSTOM_COLOR'</span><span class="p">,</span> <span class="s2">"Custom Color"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-89"></a>            <span class="p">(</span><span class="s1">'WHITE_COLOR'</span><span class="p">,</span> <span class="s2">"White"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-90"></a>        <span class="n">default</span> <span class="o">=</span> <span class="s1">'UV_IMAGE'</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-91"></a>    
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-92"></a>    <span class="n">copy_images</span> <span class="o">=</span> <span class="n">BoolProperty</span><span class="p">(</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-93"></a>            <span class="n">name</span> <span class="o">=</span> <span class="s2">"Copy Textures"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-94"></a>            <span class="n">description</span> <span class="o">=</span> <span class="s2">"Copy textures to the export subfolder"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-95"></a>            <span class="n">default</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-96"></a>    
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-97"></a>    <span class="n">use_relative_path</span> <span class="o">=</span> <span class="n">BoolProperty</span><span class="p">(</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-98"></a>            <span class="n">name</span> <span class="o">=</span> <span class="s2">"Relative Path"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-99"></a>            <span class="n">description</span> <span class="o">=</span> <span class="s2">"Use relative or absolute path for UV textures"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-100"></a>            <span class="n">default</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-101"></a>                  
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-102"></a>    <span class="c1">#--- Shading props</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-103"></a>    <span class="n">ambient</span> <span class="o">=</span> <span class="n">FloatProperty</span><span class="p">(</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-104"></a>            <span class="n">name</span> <span class="o">=</span> <span class="s2">"Ambient"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-105"></a>            <span class="n">description</span> <span class="o">=</span> <span class="s2">"The amount of ambient light emitted from the surface of the object"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-106"></a>            <span class="n">subtype</span> <span class="o">=</span> <span class="s1">'NONE'</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-107"></a>            <span class="nb">min</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">max</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-108"></a>            <span class="n">precision</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-109"></a>            <span class="n">step</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-110"></a>            <span class="n">default</span> <span class="o">=</span> <span class="mf">0.25</span><span class="p">)</span>  
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-111"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-112"></a>    <span class="n">specular</span> <span class="o">=</span> <span class="n">FloatProperty</span><span class="p">(</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-113"></a>            <span class="n">name</span> <span class="o">=</span> <span class="s2">"Specular"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-114"></a>            <span class="n">description</span> <span class="o">=</span> <span class="s2">"The light specularly reflected from the surface of the object"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-115"></a>            <span class="n">subtype</span> <span class="o">=</span> <span class="s1">'NONE'</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-116"></a>            <span class="nb">min</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">max</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-117"></a>            <span class="n">precision</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-118"></a>            <span class="n">step</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-119"></a>            <span class="n">default</span> <span class="o">=</span> <span class="mf">0.25</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-120"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-121"></a>    <span class="n">shininess</span> <span class="o">=</span> <span class="n">FloatProperty</span><span class="p">(</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-122"></a>            <span class="n">name</span> <span class="o">=</span> <span class="s2">"Shininess"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-123"></a>            <span class="n">description</span> <span class="o">=</span> <span class="s2">"The specularity or roughness of the specular reflection lobe"</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-124"></a>            <span class="nb">min</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">max</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-125"></a>            <span class="n">precision</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-126"></a>            <span class="n">step</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-127"></a>            <span class="n">default</span> <span class="o">=</span> <span class="mi">25</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-128"></a>  
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-129"></a>  
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-130"></a>    <span class="c1">#--- Draw properties in export dialog</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-131"></a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-132"></a>        <span class="n">layout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-133"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-134"></a>        <span class="c1"># Diffuse Material options</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-135"></a>        <span class="n">box</span> <span class="o">=</span> <span class="n">layout</span><span class="o">.</span><span class="n">box</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-136"></a>        <span class="n">row</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-137"></a>        <span class="n">row</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="s2">"Diffuse Material:"</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">'TEXTURE'</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-138"></a>        <span class="n">col</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">column</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-139"></a>        <span class="n">col</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"diffuse_material"</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-140"></a>        <span class="n">row</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-141"></a>        <span class="n">row</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"copy_images"</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-142"></a>        <span class="n">row</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">diffuse_material</span> <span class="o">==</span> <span class="s1">'UV_IMAGE'</span> <span class="k">else</span> <span class="bp">False</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-143"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-144"></a>        <span class="c1"># Mesh options</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-145"></a>        <span class="n">box</span> <span class="o">=</span> <span class="n">layout</span><span class="o">.</span><span class="n">box</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-146"></a>        <span class="n">row</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-147"></a>        <span class="n">row</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="s2">"Mesh Options:"</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">'MESH_DATA'</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-148"></a>        <span class="n">row</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-149"></a>        <span class="n">row</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"apply_modifiers"</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-150"></a>        <span class="n">row</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-151"></a>        <span class="n">row</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"triangulate"</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-152"></a>        <span class="n">row</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-153"></a>        <span class="n">row</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"round_values"</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-154"></a>        <span class="n">row</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"round_decimals"</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-155"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-156"></a>        <span class="c1"># Shading options</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-157"></a>        <span class="n">box</span> <span class="o">=</span> <span class="n">layout</span><span class="o">.</span><span class="n">box</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-158"></a>        <span class="n">row</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-159"></a>        <span class="n">row</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="s2">"Shading Options:"</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">'MATSPHERE'</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-160"></a>        <span class="n">col</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-161"></a>        <span class="n">col</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"ambient"</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-162"></a>        <span class="n">col</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"specular"</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-163"></a>        <span class="n">col</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"shininess"</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-164"></a>  
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-165"></a>  
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-166"></a>    <span class="c1">#--- Execute file export</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-167"></a>    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-168"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-169"></a>        <span class="c1"># Properties as a dictionary (incl. selected filepath from file dialog)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-170"></a>        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">as_keywords</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-171"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-172"></a>        <span class="c1"># Init ColladaExporter object and execute export</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-173"></a>        <span class="n">collada_ex</span> <span class="o">=</span> <span class="n">ColladaExporter</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-174"></a>        <span class="n">info</span> <span class="o">=</span> <span class="n">collada_ex</span><span class="o">.</span><span class="n">export</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-175"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-176"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">report</span><span class="p">({</span><span class="s1">'INFO'</span><span class="p">},</span> <span class="n">info</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-177"></a>        <span class="k">return</span> <span class="p">{</span><span class="s1">'FINISHED'</span><span class="p">}</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-178"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-179"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-180"></a><span class="c1">#-------------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-181"></a><span class="c1"># Misc Functions</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-182"></a><span class="c1">#-------------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-183"></a><span class="c1"># Convert list/tuple items to string separated by sep</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-184"></a><span class="k">def</span> <span class="nf">list2str</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">sep</span><span class="p">):</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-185"></a>    <span class="k">return</span> <span class="n">sep</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">items</span><span class="p">))</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-186"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-187"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-188"></a><span class="c1">#-------------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-189"></a><span class="c1"># COLLADA EXPORTER CLASS</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-190"></a><span class="c1">#-------------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-191"></a><span class="k">class</span> <span class="nc">ColladaExporter</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-192"></a>    
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-193"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-194"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-195"></a>        <span class="c1"># Collada file export path</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-196"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">export_path</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"filepath"</span><span class="p">]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-197"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">export_dir</span>  <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_path</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-198"></a>                
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-199"></a>        <span class="c1"># Directory of this blend file</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-200"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">source_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-201"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-202"></a>        <span class="c1"># Export options</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-203"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">apply_modifiers</span>   <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"apply_modifiers"</span><span class="p">]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-204"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">triangulate</span>       <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"triangulate"</span><span class="p">]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-205"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">round_values</span>      <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"round_values"</span><span class="p">]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-206"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">round_decimals</span>    <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"round_decimals"</span><span class="p">]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-207"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-208"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">diffuse_material</span>  <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"diffuse_material"</span><span class="p">]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-209"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">copy_images</span>       <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"copy_images"</span><span class="p">]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-210"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">use_relative_path</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"use_relative_path"</span><span class="p">]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-211"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-212"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ambient</span> <span class="o">=</span> <span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">"ambient"</span><span class="p">],)</span><span class="o">*</span><span class="mi">3</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,)</span>      <span class="c1"># RGBA tuple</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-213"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">specular</span> <span class="o">=</span> <span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">"specular"</span><span class="p">],)</span><span class="o">*</span><span class="mi">3</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,)</span>    <span class="c1"># RGBA tuple</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-214"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">shininess</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"shininess"</span><span class="p">]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-215"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">custom_color</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.65</span><span class="p">,</span> <span class="mf">0.60</span><span class="p">,</span> <span class="mf">0.55</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-216"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-217"></a>        <span class="c1"># Init Collada object for export</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-218"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">collada</span> <span class="o">=</span> <span class="n">Collada</span><span class="p">(</span><span class="n">validate_output</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-219"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">scene_nodes</span> <span class="o">=</span> <span class="p">[]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-220"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-221"></a>        <span class="c1"># Collada Asset Info</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-222"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">collada</span><span class="o">.</span><span class="n">assetInfo</span><span class="o">.</span><span class="n">upaxis</span> <span class="o">=</span> <span class="s1">'Z_UP'</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-223"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">collada</span><span class="o">.</span><span class="n">assetInfo</span><span class="o">.</span><span class="n">unitname</span> <span class="o">=</span> <span class="s2">"meter"</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-224"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">collada</span><span class="o">.</span><span class="n">assetInfo</span><span class="o">.</span><span class="n">unitmeter</span> <span class="o">=</span> <span class="mf">1.0</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-225"></a>        <span class="n">cont</span> <span class="o">=</span> <span class="n">asset</span><span class="o">.</span><span class="n">Contributor</span><span class="p">(</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-226"></a>                <span class="s2">"Blender </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="n">list2str</span><span class="p">(</span><span class="n">bpy</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">version</span><span class="p">,</span> <span class="s2">"."</span><span class="p">),</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-227"></a>                <span class="s2">"Addon: </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">bl_info</span><span class="p">[</span><span class="s2">"name"</span><span class="p">],</span> <span class="n">list2str</span><span class="p">(</span><span class="n">bl_info</span><span class="p">[</span><span class="s2">"version"</span><span class="p">],</span> <span class="s2">"."</span><span class="p">)),</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-228"></a>                <span class="s2">"Applly Modifiers: </span><span class="si">%s</span><span class="s2">, Triangulate: </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">apply_modifiers</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">triangulate</span><span class="p">),</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-229"></a>                <span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-230"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">collada</span><span class="o">.</span><span class="n">assetInfo</span><span class="o">.</span><span class="n">contributors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cont</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-231"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-232"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-233"></a>    <span class="c1">#---------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-234"></a>    <span class="c1"># EXPORT</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-235"></a>    <span class="c1">#---------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-236"></a>    <span class="k">def</span> <span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-237"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-238"></a>        <span class="c1">#--- Exit edit mode before exporting</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-239"></a>        <span class="k">if</span> <span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">mode_set</span><span class="o">.</span><span class="n">poll</span><span class="p">():</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-240"></a>            <span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">mode_set</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">'OBJECT'</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-241"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-242"></a>        <span class="c1">#--- Measure script execution time</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-243"></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-244"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-245"></a>        <span class="c1">#--- Export all selected objects (sorted by name)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-246"></a>        <span class="n">obj_list</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">selected_objects</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-247"></a>        <span class="n">obj_list</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">obj</span> <span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-248"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-249"></a>        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">obj_list</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-250"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">export_object</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-251"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-252"></a>        <span class="c1">#--- Finish scene nodes</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-253"></a>        <span class="n">c_scene</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">Scene</span><span class="p">(</span><span class="s2">"Scene"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene_nodes</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-254"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">collada</span><span class="o">.</span><span class="n">scenes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_scene</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-255"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">collada</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="n">c_scene</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-256"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-257"></a>        <span class="c1">#--- Write Collada to file</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-258"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">collada</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_path</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-259"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-260"></a>        <span class="c1">#--- Sort XML to fix upload to SL</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-261"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sortxml</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-262"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-263"></a>        <span class="c1">#--- Print and return info text</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-264"></a>        <span class="n">info</span> <span class="o">=</span> <span class="s2">"</span><span class="si">%d</span><span class="s2"> objects saved to '</span><span class="si">%s</span><span class="s2">' (</span><span class="si">%.3f</span><span class="s2">sec)"</span> <span class="o">%</span>\
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-265"></a>                <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">selected_objects</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">export_path</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">start_time</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-266"></a>        <span class="k">print</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-267"></a>        <span class="k">return</span> <span class="n">info</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-268"></a> 
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-269"></a> 
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-270"></a>    <span class="c1">#---------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-271"></a>    <span class="c1"># IDNAME - Format strings for Collada ids (for material names, etc)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-272"></a>    <span class="c1">#---------------------------------------------------------------------------        </span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-273"></a>    <span class="k">def</span> <span class="nf">idname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-274"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-275"></a>        <span class="c1"># Removes any PHY, -LOD1, .Lod2, _lod3 etc</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-276"></a>        <span class="nb">str</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">"[\-\.\_\s](lod|phy)\d*"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-277"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-278"></a>        <span class="c1"># Replace any dot in the string by "_"</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-279"></a>        <span class="nb">str</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">"\."</span><span class="p">,</span> <span class="s2">"_"</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-280"></a>        <span class="k">return</span> <span class="nb">str</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-281"></a> 
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-282"></a> 
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-283"></a>    <span class="c1">#---------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-284"></a>    <span class="c1"># ADD COLLADA IMAGE</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-285"></a>    <span class="c1"># - Add image to collada.images and return the CImage object</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-286"></a>    <span class="c1"># - Copy image to a subdir in the export dir if desired</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-287"></a>    <span class="c1">#---------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-288"></a>    <span class="k">def</span> <span class="nf">add_collada_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-289"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-290"></a>        <span class="c1">#--- Add image to collada.images</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-291"></a>        <span class="k">if</span> <span class="n">img</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">collada</span><span class="o">.</span><span class="n">images</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-292"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-293"></a>            <span class="c1">#--- Copy image to a subdir in the export dir</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-294"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy_images</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-295"></a>                
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-296"></a>                <span class="c1"># Image source path and basename</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-297"></a>                <span class="n">img_sourcepath</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-298"></a>                <span class="n">img_basename</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">img_sourcepath</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-299"></a>                
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-300"></a>                <span class="c1"># Copy image to subdir in export dir</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-301"></a>                <span class="n">export_filename</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">display_name_from_filepath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_path</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-302"></a>                <span class="c1">#subdir = export_filename + "_textures"</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-303"></a>                <span class="n">subdir</span> <span class="o">=</span> <span class="s2">"textures"</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-304"></a>                
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-305"></a>                <span class="n">img_destpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_dir</span><span class="p">,</span> <span class="n">subdir</span><span class="p">,</span> <span class="n">img_basename</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-306"></a>                <span class="n">copy_set</span> <span class="o">=</span> <span class="p">{(</span><span class="n">img_sourcepath</span><span class="p">,</span> <span class="n">img_destpath</span><span class="p">)}</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-307"></a>                <span class="n">io_utils</span><span class="o">.</span><span class="n">path_reference_copy</span><span class="p">(</span><span class="n">copy_set</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-308"></a>                
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-309"></a>                <span class="c1"># Relative path to the copied image</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-310"></a>                <span class="n">path</span> <span class="o">=</span> <span class="n">io_utils</span><span class="o">.</span><span class="n">path_reference</span><span class="p">(</span><span class="n">img_destpath</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">export_dir</span><span class="p">,</span> <span class="s1">'RELATIVE'</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-311"></a>                
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-312"></a>            <span class="c1">#--- Reference image where it is</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-313"></a>            <span class="k">else</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-314"></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_relative_path</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-315"></a>                    <span class="n">path_mode</span> <span class="o">=</span> <span class="s1">'RELATIVE'</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-316"></a>                <span class="k">else</span><span class="p">:</span>   
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-317"></a>                    <span class="n">path_mode</span> <span class="o">=</span> <span class="s1">'ABSOLUTE'</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-318"></a>                <span class="n">path</span> <span class="o">=</span> <span class="n">io_utils</span><span class="o">.</span><span class="n">path_reference</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">filepath</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">export_dir</span><span class="p">,</span> <span class="n">path_mode</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-319"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-320"></a>            <span class="c1">#--- Create and add CImage object</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-321"></a>            <span class="n">c_img</span> <span class="o">=</span> <span class="n">material</span><span class="o">.</span><span class="n">CImage</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-322"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">collada</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_img</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-323"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-324"></a>        <span class="c1">#--- Image already added to collada.images</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-325"></a>        <span class="k">else</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-326"></a>            <span class="n">c_img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">collada</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">img</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-327"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-328"></a>        <span class="k">return</span> <span class="n">c_img</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-329"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-330"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-331"></a>    <span class="c1">#---------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-332"></a>    <span class="c1"># ADD COLLADA VOIDMAT</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-333"></a>    <span class="c1"># - Add this material in case of empty or no material slot</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-334"></a>    <span class="c1">#---------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-335"></a>    <span class="k">def</span> <span class="nf">add_collada_voidmat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-336"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-337"></a>        <span class="c1"># Collada material effect</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-338"></a>        <span class="n">c_effect</span> <span class="o">=</span> <span class="n">material</span><span class="o">.</span><span class="n">Effect</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span><span class="s2">"-effect"</span><span class="p">,</span> <span class="p">[],</span> <span class="s1">'phong'</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-339"></a>                <span class="n">diffuse</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-340"></a>                <span class="n">ambient</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ambient</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-341"></a>                <span class="n">specular</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">specular</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-342"></a>                <span class="n">shininess</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shininess</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-343"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">collada</span><span class="o">.</span><span class="n">effects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_effect</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-344"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-345"></a>        <span class="c1"># Collada material</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-346"></a>        <span class="n">c_mat</span> <span class="o">=</span> <span class="n">material</span><span class="o">.</span><span class="n">Material</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span><span class="s2">"-material"</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">c_effect</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-347"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">collada</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_mat</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-348"></a>        <span class="k">return</span> <span class="n">scene</span><span class="o">.</span><span class="n">MaterialNode</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span><span class="s2">"-material"</span><span class="p">,</span> <span class="n">c_mat</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">[])</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-349"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-350"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-351"></a>    <span class="c1">#---------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-352"></a>    <span class="c1"># ADD COLLADA MATERIALS</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-353"></a>    <span class="c1"># - Add object materials to collada.materials and collada.effects </span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-354"></a>    <span class="c1">#---------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-355"></a>    <span class="k">def</span> <span class="nf">add_collada_materials</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">me</span><span class="p">):</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-356"></a>        <span class="n">material_nodes</span> <span class="o">=</span> <span class="p">[]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-357"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-358"></a>        <span class="c1">#--- Get active uv map layer and texture</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-359"></a>        <span class="n">uvlayer</span> <span class="o">=</span> <span class="n">me</span><span class="o">.</span><span class="n">uv_layers</span><span class="o">.</span><span class="n">active</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-360"></a>        <span class="k">if</span> <span class="n">uvlayer</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-361"></a>            <span class="n">uvtex</span> <span class="o">=</span> <span class="n">me</span><span class="o">.</span><span class="n">uv_textures</span><span class="p">[</span><span class="n">uvlayer</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-362"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-363"></a>        <span class="c1"># [1] No material slot - Add void material</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-364"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">me</span><span class="o">.</span><span class="n">materials</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-365"></a>            <span class="n">c_matnode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_collada_voidmat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">idname</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span><span class="s2">"_voidmat_0"</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-366"></a>            <span class="n">material_nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_matnode</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-367"></a>            <span class="k">return</span> <span class="n">material_nodes</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-368"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-369"></a>        <span class="c1"># [2] Go trough all slots in object materials</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-370"></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">mat</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">me</span><span class="o">.</span><span class="n">materials</span><span class="p">):</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-371"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-372"></a>            <span class="c1">#--- Empty material slot - Add void material</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-373"></a>            <span class="k">if</span> <span class="n">mat</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-374"></a>                <span class="n">c_matnode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_collada_voidmat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">idname</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span><span class="s2">"_voidmat_"</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-375"></a>                <span class="n">material_nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_matnode</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-376"></a>                <span class="k">continue</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-377"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-378"></a>            <span class="c1">#--- Look for uv image assigned to the given material and uv face</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-379"></a>            <span class="n">img</span> <span class="o">=</span> <span class="bp">None</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-380"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">diffuse_material</span> <span class="o">==</span> <span class="s1">'UV_IMAGE'</span> <span class="ow">and</span> <span class="n">uvlayer</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-381"></a>                <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">me</span><span class="o">.</span><span class="n">polygons</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-382"></a>                    <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">material_index</span> <span class="o">==</span> <span class="n">i</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-383"></a>                        <span class="n">img</span> <span class="o">=</span> <span class="n">uvtex</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">image</span>     <span class="c1"># Get image assigned to the uv face</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-384"></a>                        <span class="n">c_img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_collada_image</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="c1"># Add image to collada images</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-385"></a>                        <span class="k">break</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-386"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-387"></a>            <span class="c1">#--- Include image map in the material effect</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-388"></a>            <span class="k">if</span> <span class="n">img</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-389"></a>                <span class="n">c_surface</span> <span class="o">=</span> <span class="n">material</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span><span class="s2">"-surface"</span><span class="p">,</span> <span class="n">c_img</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-390"></a>                <span class="n">c_sampler</span> <span class="o">=</span> <span class="n">material</span><span class="o">.</span><span class="n">Sampler2D</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span><span class="s2">"-sampler"</span><span class="p">,</span> <span class="n">c_surface</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-391"></a>                <span class="n">params_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">c_sampler</span><span class="p">,</span> <span class="n">c_surface</span><span class="p">]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-392"></a>                <span class="n">inputs_list</span> <span class="o">=</span> <span class="p">[(</span><span class="n">uvlayer</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">'TEXCOORD'</span><span class="p">,</span> <span class="s1">'0'</span><span class="p">)]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-393"></a>                <span class="n">diffuse_map</span> <span class="o">=</span> <span class="n">material</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">c_sampler</span><span class="p">,</span> <span class="n">uvlayer</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-394"></a>                
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-395"></a>            <span class="c1">#--- No image map for the material effect - Use solid color instead!!</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-396"></a>            <span class="k">else</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-397"></a>                <span class="n">params_list</span> <span class="o">=</span> <span class="p">[]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-398"></a>                <span class="n">inputs_list</span> <span class="o">=</span> <span class="p">[]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-399"></a>                
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-400"></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">diffuse_material</span> <span class="o">==</span> <span class="s1">'MAT_COLOR'</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-401"></a>                    <span class="n">clr</span> <span class="o">=</span> <span class="n">mat</span><span class="o">.</span><span class="n">diffuse_color</span><span class="p">[:]</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-402"></a>                    <span class="n">diffuse_map</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">clr</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-403"></a>                    
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-404"></a>                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">diffuse_material</span> <span class="o">==</span> <span class="s1">'CUSTOM_COLOR'</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-405"></a>                    <span class="n">diffuse_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_color</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-406"></a>                    
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-407"></a>                <span class="k">else</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-408"></a>                    <span class="n">diffuse_map</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>  <span class="c1"># WHITE_COLOR</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-409"></a>                
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-410"></a>            <span class="c1">#--- Add material effect to collada.effects</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-411"></a>            <span class="n">c_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idname</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span><span class="s2">"_"</span><span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">idname</span><span class="p">(</span><span class="n">mat</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-412"></a>            <span class="n">c_effect</span> <span class="o">=</span> <span class="n">material</span><span class="o">.</span><span class="n">Effect</span><span class="p">(</span><span class="n">c_name</span> <span class="o">+</span><span class="s2">"-effect"</span><span class="p">,</span> <span class="n">params_list</span><span class="p">,</span> <span class="s1">'phong'</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-413"></a>                    <span class="n">diffuse</span> <span class="o">=</span> <span class="n">diffuse_map</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-414"></a>                    <span class="n">ambient</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ambient</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-415"></a>                    <span class="n">specular</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">specular</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-416"></a>                    <span class="n">shininess</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shininess</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-417"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">collada</span><span class="o">.</span><span class="n">effects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_effect</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-418"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-419"></a>            <span class="c1">#--- Add material to collada.materials</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-420"></a>            <span class="n">c_mat</span> <span class="o">=</span> <span class="n">material</span><span class="o">.</span><span class="n">Material</span><span class="p">(</span><span class="n">c_name</span> <span class="o">+</span><span class="s2">"-material"</span><span class="p">,</span> <span class="n">c_name</span><span class="p">,</span> <span class="n">c_effect</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-421"></a>            <span class="n">c_matnode</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">MaterialNode</span><span class="p">(</span><span class="n">c_name</span> <span class="o">+</span><span class="s2">"-material"</span><span class="p">,</span> <span class="n">c_mat</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="n">inputs_list</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-422"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">collada</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_mat</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-423"></a>            <span class="n">material_nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_matnode</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-424"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-425"></a>        <span class="c1">#--- Return scene.MaterialNode for each material</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-426"></a>        <span class="k">return</span> <span class="n">material_nodes</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-427"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-428"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-429"></a>    <span class="c1">#---------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-430"></a>    <span class="c1"># EXPORT OBJECT</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-431"></a>    <span class="c1">#---------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-432"></a>    <span class="k">def</span> <span class="nf">export_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-433"></a>        <span class="n">cs</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-434"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-435"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-436"></a>        <span class="c1"># Prepare object's mesh data (me)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-437"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-438"></a>        <span class="c1"># Create mesh for export &amp; apply modifiers if desired</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-439"></a>        <span class="n">me</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">to_mesh</span><span class="p">(</span><span class="n">cs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_modifiers</span><span class="p">,</span> <span class="s1">'PREVIEW'</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-440"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-441"></a>        <span class="c1"># Triangulate mesh if desired</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-442"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">triangulate</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-443"></a>            <span class="n">bm</span> <span class="o">=</span> <span class="n">bmesh</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-444"></a>            <span class="n">bm</span><span class="o">.</span><span class="n">from_mesh</span><span class="p">(</span><span class="n">me</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-445"></a>            <span class="n">bmesh</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">triangulate</span><span class="p">(</span><span class="n">bm</span><span class="p">,</span> <span class="n">faces</span><span class="o">=</span><span class="n">bm</span><span class="o">.</span><span class="n">faces</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-446"></a>            <span class="n">bm</span><span class="o">.</span><span class="n">to_mesh</span><span class="p">(</span><span class="n">me</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-447"></a>            <span class="n">bm</span><span class="o">.</span><span class="n">free</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-448"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-449"></a>        <span class="c1"># Calculate normals, necessary if auto-smooth option enabled</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-450"></a>        <span class="n">me</span><span class="o">.</span><span class="n">calc_normals</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-451"></a>        <span class="n">me</span><span class="o">.</span><span class="n">calc_normals_split</span><span class="p">()</span>     
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-452"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-453"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-454"></a>        <span class="c1"># Material &amp; effect nodes for each object's material</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-455"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-456"></a>        <span class="n">material_nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_collada_materials</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">me</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-457"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-458"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-459"></a>        <span class="c1"># Source list for vertex coords</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-460"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-461"></a>        <span class="n">verts_srcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idname</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"-verts"</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-462"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-463"></a>        <span class="n">verts_co</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">co</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">me</span><span class="o">.</span><span class="n">vertices</span> <span class="k">for</span> <span class="n">co</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">co</span><span class="p">])</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-464"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_values</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-465"></a>            <span class="n">verts_co</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">verts_co</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_decimals</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-466"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-467"></a>        <span class="n">verts_src</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">FloatSource</span><span class="p">(</span><span class="n">verts_srcid</span><span class="p">,</span> <span class="n">verts_co</span><span class="p">,</span> <span class="p">(</span><span class="s1">'X'</span><span class="p">,</span> <span class="s1">'Y'</span><span class="p">,</span> <span class="s1">'Z'</span><span class="p">))</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-468"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-469"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-470"></a>        <span class="c1"># Source list for normals</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-471"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-472"></a>        <span class="n">normals_srcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idname</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"-normals"</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-473"></a>        <span class="n">normals</span> <span class="o">=</span> <span class="p">[]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-474"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-475"></a>        <span class="c1"># - Good method to get normals, but it ignores Auto-Smooth option</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-476"></a>        <span class="c1">#for f in me.polygons:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-477"></a>        <span class="c1">#    # Smooth shaded face - use vertex normals</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-478"></a>        <span class="c1">#    if f.use_smooth:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-479"></a>        <span class="c1">#        for v_id in f.vertices:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-480"></a>        <span class="c1">#            v = me.vertices[v_id]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-481"></a>        <span class="c1">#            normals.extend(v.normal)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-482"></a>        <span class="c1">#    # Flat shaded face - use face normal for each polygon vert</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-483"></a>        <span class="c1">#    else:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-484"></a>        <span class="c1">#        for v_id in f.vertices:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-485"></a>        <span class="c1">#            normals.extend(f.normal)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-486"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-487"></a>        <span class="c1"># - Get normals from Loops - Loops define the boundary loop of a face &amp; store per-face-vertex data</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-488"></a>        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">me</span><span class="o">.</span><span class="n">polygons</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-489"></a>            <span class="k">for</span> <span class="n">loop_id</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">loop_indices</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-490"></a>                <span class="n">normals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">me</span><span class="o">.</span><span class="n">loops</span><span class="p">[</span><span class="n">loop_id</span><span class="p">]</span><span class="o">.</span><span class="n">normal</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-491"></a> 
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-492"></a>        <span class="n">normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">normals</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-493"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_values</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-494"></a>            <span class="n">normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">normals</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_decimals</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-495"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-496"></a>        <span class="n">normals_src</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">FloatSource</span><span class="p">(</span><span class="n">normals_srcid</span><span class="p">,</span> <span class="n">normals</span><span class="p">,</span> <span class="p">(</span><span class="s1">'X'</span><span class="p">,</span> <span class="s1">'Y'</span><span class="p">,</span> <span class="s1">'Z'</span><span class="p">))</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-497"></a>        <span class="n">sources</span> <span class="o">=</span> <span class="p">[</span><span class="n">verts_src</span><span class="p">,</span> <span class="n">normals_src</span><span class="p">]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-498"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-499"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-500"></a>        <span class="c1"># Source list for the active UV map texture coords</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-501"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-502"></a>        <span class="n">uvlayer</span> <span class="o">=</span> <span class="n">me</span><span class="o">.</span><span class="n">uv_layers</span><span class="o">.</span><span class="n">active</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-503"></a>        <span class="k">if</span> <span class="n">uvlayer</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-504"></a>            <span class="n">tex_srcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idname</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"-tex-"</span> <span class="o">+</span> <span class="n">uvlayer</span><span class="o">.</span><span class="n">name</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-505"></a>            <span class="n">tex_uv</span> <span class="o">=</span> <span class="p">[]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-506"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-507"></a>            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">me</span><span class="o">.</span><span class="n">polygons</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-508"></a>                <span class="c1">#for loop_id in range(f.loop_start, f.loop_start + f.loop_total):</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-509"></a>                <span class="k">for</span> <span class="n">loop_id</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">loop_indices</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-510"></a>                    <span class="n">tex_uv</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">uvlayer</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">loop_id</span><span class="p">]</span><span class="o">.</span><span class="n">uv</span><span class="p">])</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-511"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-512"></a>            <span class="n">tex_uv</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">tex_uv</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-513"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_values</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-514"></a>                <span class="n">tex_uv</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">tex_uv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_decimals</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-515"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-516"></a>            <span class="n">tex_src</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">FloatSource</span><span class="p">(</span><span class="n">tex_srcid</span><span class="p">,</span> <span class="n">tex_uv</span><span class="p">,</span> <span class="p">(</span><span class="s1">'S'</span><span class="p">,</span> <span class="s1">'T'</span><span class="p">))</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-517"></a>            <span class="n">sources</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tex_src</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-518"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-519"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-520"></a>        <span class="c1"># Geometry node for this object incl. source lists</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-521"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-522"></a>        <span class="n">c_geom</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">collada</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idname</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">+</span><span class="s2">"-geom"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idname</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">),</span> <span class="n">sources</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-523"></a>                
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-524"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-525"></a>        <span class="c1"># Create Polylist for each material</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-526"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-527"></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">matnode</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">material_nodes</span><span class="p">):</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-528"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-529"></a>            <span class="c1">#--- Input list to define data binding to the source lists</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-530"></a>            <span class="n">inlist</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">InputList</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-531"></a>            <span class="n">inlist</span><span class="o">.</span><span class="n">addInput</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">'VERTEX'</span><span class="p">,</span> <span class="s1">'#'</span><span class="o">+</span><span class="n">verts_srcid</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-532"></a>            <span class="n">inlist</span><span class="o">.</span><span class="n">addInput</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'NORMAL'</span><span class="p">,</span> <span class="s1">'#'</span><span class="o">+</span><span class="n">normals_srcid</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-533"></a>            <span class="k">if</span> <span class="n">uvlayer</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-534"></a>                <span class="n">inlist</span><span class="o">.</span><span class="n">addInput</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'TEXCOORD'</span><span class="p">,</span> <span class="s1">'#'</span><span class="o">+</span><span class="n">tex_srcid</span><span class="p">,</span> <span class="nb">set</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-535"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-536"></a>            <span class="c1">#--- List of indicies to the source lists for each face f, for each vert v</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-537"></a>            <span class="n">indices</span> <span class="o">=</span> <span class="p">[]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-538"></a>            <span class="n">vcounts</span> <span class="o">=</span> <span class="p">[]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-539"></a>            <span class="n">n_id</span> <span class="o">=</span> <span class="mi">0</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-540"></a>            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">me</span><span class="o">.</span><span class="n">polygons</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-541"></a>                <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">material_index</span> <span class="o">==</span> <span class="n">i</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-542"></a>                    <span class="n">vcounts</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">vertices</span><span class="p">)])</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-543"></a>                    <span class="k">for</span> <span class="n">v_id</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">vertices</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-544"></a>                        <span class="n">indices</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">v_id</span><span class="p">,</span> <span class="n">n_id</span><span class="p">])</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-545"></a>                        <span class="n">n_id</span> <span class="o">+=</span> <span class="mi">1</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-546"></a>                <span class="k">else</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-547"></a>                    <span class="k">for</span> <span class="n">v_id</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">vertices</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-548"></a>                        <span class="n">n_id</span> <span class="o">+=</span> <span class="mi">1</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-549"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-550"></a>            <span class="c1">#--- Bind polylist with existing material node</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-551"></a>            <span class="n">material_id</span> <span class="o">=</span> <span class="n">matnode</span><span class="o">.</span><span class="n">symbol</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-552"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-553"></a>            <span class="c1">#--- Append polylist to geometry</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-554"></a>            <span class="n">c_poly</span> <span class="o">=</span> <span class="n">c_geom</span><span class="o">.</span><span class="n">createPolylist</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">indices</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">vcounts</span><span class="p">),</span> <span class="n">inlist</span><span class="p">,</span> <span class="n">material_id</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-555"></a>            <span class="n">c_geom</span><span class="o">.</span><span class="n">primitives</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_poly</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-556"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-557"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-558"></a>        <span class="c1"># Create scene node for this object</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-559"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-560"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">collada</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_geom</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-561"></a>        <span class="n">c_geom_node</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">GeometryNode</span><span class="p">(</span><span class="n">c_geom</span><span class="p">,</span> <span class="n">material_nodes</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-562"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-563"></a>        <span class="c1">#--- Object transformation matrix</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-564"></a>        <span class="n">matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">matrix_world</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-565"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_values</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-566"></a>            <span class="n">matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_decimals</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-567"></a>        <span class="n">c_matrix</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">MatrixTransform</span><span class="p">(</span><span class="n">matrix</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-568"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-569"></a>        <span class="c1">#--- Scene node</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-570"></a>        <span class="n">c_node</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">idname</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">),</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">c_matrix</span><span class="p">,</span> <span class="n">c_geom_node</span><span class="p">])</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-571"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">scene_nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_node</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-572"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-573"></a>        <span class="c1">#--- Clean up mesh used for export</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-574"></a>        <span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">meshes</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">me</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-575"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-576"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-577"></a>    <span class="c1">#---------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-578"></a>    <span class="c1"># Sort XML nodes to fix Second Life upload</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-579"></a>    <span class="c1"># - With the default sorting, SL fails to upload textures</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-580"></a>    <span class="c1"># - newparam/surface node must be before newparam/sampler2D for each effect</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-581"></a>    <span class="c1">#---------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-582"></a>    <span class="k">def</span> <span class="nf">sortxml</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-583"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-584"></a>        <span class="c1">#--- Load Collada XML file</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-585"></a>        <span class="n">tree</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_path</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-586"></a>        <span class="n">root</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-587"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-588"></a>        <span class="c1"># Collada namespace</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-589"></a>        <span class="n">ns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'ns'</span><span class="p">:</span><span class="s1">'http://www.collada.org/2005/11/COLLADASchema'</span><span class="p">}</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-590"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-591"></a>        <span class="c1"># Get node tag without namespace</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-592"></a>        <span class="n">gettag</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">node</span> <span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">"{.*}"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-593"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-594"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-595"></a>        <span class="c1"># Re-order root nodes</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-596"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-597"></a>        <span class="n">root_order</span> <span class="o">=</span> <span class="p">[</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-598"></a>            <span class="s1">'asset'</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-599"></a>            <span class="s1">'library_images'</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-600"></a>            <span class="s1">'library_effects'</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-601"></a>            <span class="s1">'library_materials'</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-602"></a>            <span class="s1">'library_geometries'</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-603"></a>            <span class="s1">'library_visual_scenes'</span><span class="p">,</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-604"></a>            <span class="s1">'scene'</span><span class="p">]</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-605"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-606"></a>        <span class="n">root</span><span class="p">[:]</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">root</span> <span class="p">:</span> <span class="n">root_order</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">gettag</span><span class="p">(</span><span class="n">root</span><span class="p">)))</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-607"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-608"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-609"></a>        <span class="c1"># Reverse sort of effect nodes newparam/surface and newparam/sampler2D</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-610"></a>        <span class="c1">#-----------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-611"></a>        <span class="k">for</span> <span class="n">effect</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">'.//ns:effect/ns:profile_COMMON'</span><span class="p">,</span> <span class="n">ns</span><span class="p">):</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-612"></a>            
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-613"></a>            <span class="c1"># Find and remove newparam nodes from the tree</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-614"></a>            <span class="n">newparam</span> <span class="o">=</span> <span class="n">effect</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"ns:newparam"</span><span class="p">,</span> <span class="n">ns</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-615"></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">newparam</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-616"></a>                <span class="n">effect</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-617"></a>         
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-618"></a>            <span class="c1"># Insert sorted newparam nodes</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-619"></a>            <span class="c1"># &lt;surface&gt; node must be before &lt;sampler2D&gt;, thus reverse order</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-620"></a>            <span class="n">newparam</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">newparam</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">newparam</span> <span class="p">:</span> <span class="n">newparam</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'sid'</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-621"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-622"></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">newparam</span><span class="p">):</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-623"></a>                <span class="n">effect</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">newparam</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-624"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-625"></a>        <span class="c1">#--- Write XML to file</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-626"></a>        <span class="n">spath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_path</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-627"></a>        <span class="c1">#tree.write(spath[0] +"_sortxml"+ spath[1])</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-628"></a>        <span class="n">tree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_path</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-629"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-630"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-631"></a><span class="c1">#-------------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-632"></a><span class="c1"># MENU</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-633"></a><span class="c1">#-------------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-634"></a><span class="k">def</span> <span class="nf">menu_export</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-635"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="n">ColladaExporter_OT</span><span class="o">.</span><span class="n">bl_idname</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">"Collada for SL (.dae)"</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-636"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-637"></a>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-638"></a><span class="c1">#-------------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-639"></a><span class="c1"># REGISTER/UNREGISTER ADDON CLASSES</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-640"></a><span class="c1">#-------------------------------------------------------------------------------</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-641"></a><span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-642"></a>    <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_module</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-643"></a>    <span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">INFO_MT_file_export</span><span class="o">.</span><span class="n">prepend</span><span class="p">(</span><span class="n">menu_export</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-644"></a>     
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-645"></a><span class="k">def</span> <span class="nf">unregister</span><span class="p">():</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-646"></a>    <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">unregister_module</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-647"></a>    <span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">INFO_MT_file_export</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">menu_export</span><span class="p">)</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-648"></a>        
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-649"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-650"></a>    <span class="n">register</span><span class="p">()</span>
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-651"></a>    
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-652"></a>    
<a name="listingsblender-addonscollada-exporter-sl03colladaexporterslpy-653"></a>    
</pre></td>
</tr></table>
</div>

        <div id="page_sidebar" class="hidden-print" role="complementary"></div>
    </div>


    <!-- BODY FOOTER !! -->
    <footer id="body_footer" class="bodypart"><!-- Footer content from conf.py -->
        
    Contents © 2018 by <a href="mailto:none">Miki</a>
    — Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a>
    
    


        <!-- Social buttons from conf.py -->
        
    <div class="counter">
        <script src="https://www.w3counter.com/tracker.js?id=103452"></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-82334406-1', 'auto');
            ga('send', 'pageview');
        </script>
</div>

    <div id="social_icons">
        <a href="https://github.com/meshlogic/" title="My GitHub"><i class="fa fa-3x fa-github"></i></a>

        <a href="https://www.flickr.com/people/meshlogic/" title="See my photos on Flickr!"><i class="fa fa-3x fa-flickr"></i></a>

        <a href="https://www.youtube.com/channel/UCJn5IgykaGERrwvzLhayJiw" title="See my videos on YouTube!"><i class="fa fa-3x fa-youtube-square"></i></a>
    </div>


        

        
    </footer>
</div>


<!-- SCRIPTS !! -->
<script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
</script><script src="../../../../assets/js/all-nocdn.js"></script>
</body>
</html>
